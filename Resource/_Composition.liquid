{
  "fullUrl": "urn:uuid:{{ ID }}",
  "resource": {
    "resourceType": "Composition",
    "id": "{{ ID }}",
    "identifier": {
      "use": "official",
      "value": "{{ composition.id.root }}"
    },
    "status": "final",
    "type": "{{ composition.code }}",
    "date": "{{ composition.effectiveTime.value }}",
    "title": "{{ composition.title._ }}",
    "confidentiality": "{{ composition.confidentialityCode.code }}",
    "attester": [
      {
        "mode": "{{ composition.legalAuthenticator ? 'legal' : '' }}",
        "time": "{{ composition.legalAuthenticator.time.value }}",
        "party": {
          "reference": "{{ practitionerId ? 'Practitioner/' + practitionerId : '' }}"
        }
      }
    ],
    "event": [
      {
        "period": {
          "start": "{{ composition.documentationOf.serviceEvent.effectiveTime.low.value }}",
          "end": "{{ composition.documentationOf.serviceEvent.effectiveTime.high.value }}"
        }
      }
    ],
    "section": [
      {% for component in composition.component.structuredBody.component %}
      {
        "title": "{{ component.section.title._ ? component.section.title._ : component.section.code.displayName }}",
        "text": {
          "status": "generated",
          "div": "<div xmlns=\"http://www.w3.org/1999/xhtml\">{{ component.section.title._ ? component.section.title._ : component.section.code.displayName }}</div>"
        },
        "code": "{{ component.section.code }}",
        "mode": "snapshot"
      },
      {% endfor %}
    ]
  },
  "request": {
    "method": "PUT",
    "url": "Composition/{{ ID }}"
  }
}
